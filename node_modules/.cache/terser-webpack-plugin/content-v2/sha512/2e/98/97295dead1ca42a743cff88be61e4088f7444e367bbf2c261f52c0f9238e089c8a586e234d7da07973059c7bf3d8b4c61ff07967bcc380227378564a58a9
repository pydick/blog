{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{353:function(s,n,a){\"use strict\";a.r(n);var e=a(42),t=Object(e.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":s.$parent.slotKey}},[a(\"h2\",{attrs:{id:\"开发一个vue插件\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#开发一个vue插件\"}},[s._v(\"#\")]),s._v(\" 开发一个Vue插件\")]),s._v(\" \"),a(\"blockquote\",[a(\"p\",[s._v(\"Vue 项目开发过程中​，经常用到插件，比如原生插件 vue-router、vuex，还有 element-ui 提供的 notify、message 等等。这些插件让我们的开发变得更简单更高效。那么 Vue 插件是怎么开发的呢​？​如何自己开发一个 Vue 插件\")])]),s._v(\" \"),a(\"p\",[s._v(\"本文涉及技术点：\")]),s._v(\" \"),a(\"ol\",[a(\"li\",[s._v(\"Vue 插件的本质\")]),s._v(\" \"),a(\"li\",[s._v(\"Vue.extend() 全局方法\")]),s._v(\" \"),a(\"li\",[s._v(\"如何手动挂载 Vue 实例\")]),s._v(\" \"),a(\"li\",[s._v(\"Vue.use() 的原理\")])]),s._v(\" \"),a(\"h3\",{attrs:{id:\"一、定义\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#一、定义\"}},[s._v(\"#\")]),s._v(\" 一、定义\")]),s._v(\" \"),a(\"p\",[s._v(\"什么是Vue插件，它和Vue组件有什么区别​？​来看一下官网的解释：\")]),s._v(\" \"),a(\"blockquote\",[a(\"p\",[s._v(\"“插件通常用来为 Vue 添加全局功能。”\\n“组件是可复用的 Vue 实例，且带有一个名字。”\\n—— Vue.js 官网\")])]),s._v(\" \"),a(\"p\",[s._v(\"Emmmm，似乎好像有种朦胧美。。。\")]),s._v(\" \"),a(\"p\",[s._v(\"我来尝试解释一下，其实， Vue 插件 和 Vue组件 只是在 Vue.js 中包装的两个概念而已​，不管是插件还是组件，最终目的都是为了实现逻辑复用。它们的本质都是对代码逻辑的封装，只是封装方式不同而已。在必要时，组件也可以封装成插件，插件也可以改写成组件，就看实际哪种封装更方便使用了。\")]),s._v(\" \"),a(\"p\",[s._v(\"除此之外，插件是全局的，组件可以全局注册也可以局部注册。\")]),s._v(\" \"),a(\"p\",[s._v(\"我们今天只聚焦 Vue 插件。\")]),s._v(\" \"),a(\"blockquote\",[a(\"p\",[s._v(\"插件一般有下面几种：\\n添加全局方法或者属性。如: vue-custom-element\\n添加全局资源：指令/过滤器/过渡等。如 vue-touch\\n通过全局混入来添加一些组件选项。如 vue-router\\n添加 Vue 实例方法，通过把它们添加到 Vue.prototype 上实现。\\n一个库，提供自己的 API，同时提供上面提到的一个或多个功能。如 vue-router\\n—— Vue.js 官网\")])]),s._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"MyPlugin.install = function (Vue, options) {\\n  // 1. 添加全局方法或 property\\n  Vue.myGlobalMethod = function () {\\n    // 逻辑...\\n  }\\n\\n  // 2. 添加全局资源\\n  Vue.directive('my-directive', {\\n    bind (el, binding, vnode, oldVnode) {\\n      // 逻辑...\\n    }\\n    ...\\n  })\\n\\n  // 3. 注入组件选项\\n  Vue.mixin({\\n    created: function () {\\n      // 逻辑...\\n    }\\n    ...\\n  })\\n\\n  // 4. 添加实例方法\\n  Vue.prototype.$myMethod = function (methodOptions) {\\n    // 逻辑...\\n  }\\n}\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"21\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"22\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"23\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"24\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"25\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"26\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"27\")]),a(\"br\")])]),a(\"h3\",{attrs:{id:\"二、插件的使用\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#二、插件的使用\"}},[s._v(\"#\")]),s._v(\" 二、插件的使用\")]),s._v(\" \"),a(\"p\",[s._v(\"插件需要通过\"),a(\"code\",[s._v(\"Vue.use()\")]),s._v(\"方法注册到全局，并且需要在调用\"),a(\"code\",[s._v(\"new Vue()\")]),s._v(\"启动应用之前完成。之后在其他\"),a(\"code\",[s._v(\"Vue\")]),s._v(\"实例里面就可以通过\"),a(\"code\",[s._v(\"this.$xxx\")]),s._v(\"来调用插件中提供的\"),a(\"code\",[s._v(\"API\")]),s._v(\"了。\")]),s._v(\" \"),a(\"p\",[s._v(\"下面以实现一个简易的提示框插件\"),a(\"code\",[s._v(\"toast\")]),s._v(\"为例，给大家介绍怎么一步一步开发和发布一个\"),a(\"code\",[s._v(\"Vue\")]),s._v(\"插件。\")]),s._v(\" \"),a(\"p\",[s._v(\"希望达到的效果：\\n在 main.js 中 use：\")]),s._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"// src/main.js\\nimport Vue from 'vue'\\nimport toast from '@champyin/toast'\\n\\nVue.use(toast)\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\")])]),a(\"p\",[s._v(\"在 \"),a(\"code\",[s._v(\"App.vue\")]),s._v(\" 的生命周期 \"),a(\"code\",[s._v(\"mounted\")]),s._v(\" 方法里调用 \"),a(\"code\",[s._v(\"this.$toast()\")]),s._v(\"：\")]),s._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"// src/App.vue\\n<template>\\n <div>\\n   <button @click='handleClick'>Toast</button>\\n </div>\\n</template>\\n<script>\\nexport default {\\n    name: 'demo',\\n    methods: {\\n      handleClick() {\\n      this.$toast({\\n        type: 'success',\\n        msg: '成功',\\n        duration: 3\\n      })\\n    }\\n  }\\n}\\n<\\/script>\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),a(\"br\")])]),a(\"p\",[s._v(\"运行后在页面上点击按钮，弹出 成功 的提示，然后3秒后消失。\\n\"),a(\"img\",{attrs:{src:\"/vue%E6%8F%92%E4%BB%B6/vue%E6%8F%92%E4%BB%B6-%E6%95%88%E6%9E%9C%E5%9B%BE.png\",alt:\"效果图\"}})]),s._v(\" \"),a(\"h3\",{attrs:{id:\"三、插件开发\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#三、插件开发\"}},[s._v(\"#\")]),s._v(\" 三、插件开发\")]),s._v(\" \"),a(\"ol\",[a(\"li\",[s._v(\"编写 \"),a(\"code\",[s._v(\"toast\")]),s._v(\" 的本体。\\n在 Vue 项目（你可以使用 \"),a(\"code\",[s._v(\"Vue-cli\")]),s._v(\" 快速生成一个 \"),a(\"code\",[s._v(\"Vue\")]),s._v(\" 项目，也可以自己用 \"),a(\"code\",[s._v(\"webpack\")]),s._v(\" 搭建一个）的 \"),a(\"code\",[s._v(\"src\")]),s._v(\" 目录下创建 \"),a(\"code\",[s._v(\"components/Toast/index.vue\")]),s._v(\" 文件。\")])]),s._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"// src/components/Toast/index.vue\\n<template>\\n  <transition name='fade'>\\n    <div class='uco-toast' v-if='isShow'>\\n      <span :class='iconStyle'></span>\\n      <span>{{msg}}</span>\\n    </div>\\n  </transition>\\n</template>\\n\\n<script>\\nexport default {\\n  data() {\\n    return {\\n      isShow: false,\\n      type: 'success',\\n      msg: '成功',\\n      duration: 1,\\n    };\\n  },\\n  computed: {\\n    iconStyle() {\\n      return `tfont icon-${this.type} toast-icon`;\\n    },\\n  },\\n  mounted() {\\n    this.isShow = true;\\n    setTimeout(() => {\\n      this.isShow = false;\\n    }, this.duration * 1000);\\n  },\\n};\\n<\\/script>\\n\\n<style lang='less' scoped>\\n// 样式略\\n</style>\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"21\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"22\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"23\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"24\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"25\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"26\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"27\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"28\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"29\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"30\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"31\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"32\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"33\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"34\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"35\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"36\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"37\")]),a(\"br\")])]),a(\"p\",[s._v(\"现在 \"),a(\"code\",[s._v(\"toast\")]),s._v(\" 本体完成了，但是它里面的数据目前没法改变，因为我没有给它定义 \"),a(\"code\",[s._v(\"props\")]),s._v(\" 属性。这不是 \"),a(\"code\",[s._v(\"bug\")]),s._v(\"，而是，插件并不是通过 \"),a(\"code\",[s._v(\"pops\")]),s._v(\" 来传值的。\\n2. 手动挂载 \"),a(\"code\",[s._v(\"toast\")]),s._v(\" 实例的 \"),a(\"code\",[s._v(\"dom\")])]),s._v(\" \"),a(\"p\",[s._v(\"为了给插件传值，可以利用基础 \"),a(\"code\",[s._v(\"Vue\")]),s._v(\" 构造器 \"),a(\"code\",[s._v(\"Vue.extend()\")]),s._v(\" 创建一个“子类”。这个子类相当于一个继承了 \"),a(\"code\",[s._v(\"Vue\")]),s._v(\" 的 \"),a(\"code\",[s._v(\"Toast\")]),s._v(\" 构造器。然后在 \"),a(\"code\",[s._v(\"new\")]),s._v(\" 这个构造函数的时候，给 \"),a(\"code\",[s._v(\"Toast\")]),s._v(\" 的 \"),a(\"code\",[s._v(\"data\")]),s._v(\" 属性传值，然后手动调用这个实例的 \"),a(\"code\",[s._v(\"$mount()\")]),s._v(\" 方法手动挂载，最后使用原生\"),a(\"code\",[s._v(\"JS\")]),s._v(\"的 \"),a(\"code\",[s._v(\"appendChild\")]),s._v(\" 将真实 \"),a(\"code\",[s._v(\"DOM\")]),s._v(\" （通过实例上的 \"),a(\"code\",[s._v(\"$el\")]),s._v(\" 属性获取）添加到 \"),a(\"code\",[s._v(\"body\")]),s._v(\" 上。\")]),s._v(\" \"),a(\"p\",[s._v(\"在 \"),a(\"code\",[s._v(\"src\")]),s._v(\" 目录下新建 \"),a(\"code\",[s._v(\"components/Toast/index.js\")]),s._v(\" 文件：\")]),s._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"// src/components/Toast/index.js\\nimport Vue from 'vue';\\nimport Toast from './index.vue';\\n\\n// 使用 Vue.extend() 创建 Toast 的构造器\\nconst ToastConstructor = Vue.extend(Toast);\\n\\nconst toast = function(options = {}) {\\n    // 创建 Toast 实例，通过构造函数传参，\\n    // 并调用 Vue 实例上的 $mount() 手动挂载\\n    const toastInstance = new ToastConstructor({\\n        data: options\\n    }).$mount();\\n\\n    // 手动把真实 dom 挂到 html 的 body 上\\n    document.body.appendChild(toastInstance.$el);\\n\\n    return toastInstance;\\n};\\n\\n// 导出包装好的 toast 方法\\nexport default toast;\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"21\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"22\")]),a(\"br\")])]),a(\"ol\",{attrs:{start:\"3\"}},[a(\"li\",[s._v(\"暴露 \"),a(\"code\",[s._v(\"install\")]),s._v(\" 方法给 \"),a(\"code\",[s._v(\"Vue.use()\")]),s._v(\" 使用。\")])]),s._v(\" \"),a(\"blockquote\",[a(\"p\",[s._v(\"为了支持 Vue.use()，Vue.js 的插件应该暴露一个 install 方法。这个方法的第一个参数是 Vue 构造器，第二个参数是一个可选的选项对象。\\n—— Vue.js 官网\")])]),s._v(\" \"),a(\"p\",[s._v(\"通过 \"),a(\"code\",[s._v(\"Vue.js\")]),s._v(\" 源码也可以看出，\"),a(\"code\",[s._v(\"Vue.use()\")]),s._v(\" 方法所做的事情就是调用插件或者组件的 \"),a(\"code\",[s._v(\"install\")]),s._v(\" 方法，然后把全局 \"),a(\"code\",[s._v(\"Vue\")]),s._v(\" 传进去供插件和组件使用。\")]),s._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"// https://github.com/vuejs/vue/blob/dev/src/core/global-api/use.js\\n/* @flow */\\n\\nimport { toArray } from '../util/index'\\n\\nexport function initUse (Vue: GlobalAPI) {\\n  Vue.use = function (plugin: Function | Object) {\\n    const installedPlugins = (this._installedPlugins || (this._installedPlugins = []))\\n    if (installedPlugins.indexOf(plugin) > -1) {\\n      return this\\n    }\\n\\n    // additional parameters\\n    const args = toArray(arguments, 1)\\n    args.unshift(this)\\n    if (typeof plugin.install === 'function') {\\n      plugin.install.apply(plugin, args)\\n    } else if (typeof plugin === 'function') {\\n      plugin.apply(null, args)\\n    }\\n    installedPlugins.push(plugin)\\n    return this\\n  }\\n}\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"21\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"22\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"23\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"24\")]),a(\"br\")])]),a(\"p\",[s._v(\"在 \"),a(\"code\",[s._v(\"src\")]),s._v(\" 目录下新建 \"),a(\"code\",[s._v(\"components/index.js\")]),s._v(\" 文件，定义一个 \"),a(\"code\",[s._v(\"install\")]),s._v(\" 方法，在里面将 \"),a(\"code\",[s._v(\"toast\")]),s._v(\" 实例放到 \"),a(\"code\",[s._v(\"Vue.prototype\")]),s._v(\" 上作为 \"),a(\"code\",[s._v(\"Vue\")]),s._v(\" 实例的方法暴露到全局。\")]),s._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"// src/components/index.js\\nimport toast from './Toast/index';\\nimport '../icon/iconfont.css';\\n\\n// 准备好 install 方法 给 Vue.use() 使用\\nexport function install(Vue) {\\n  if (install.installed) return;\\n  install.installed = true;\\n\\n  // 将包装好的 toast 挂到Vue的原型上，作为 Vue 实例上的方法\\n  Vue.prototype.$toast = toast;\\n}\\n\\n// 默认导出 install\\nexport default {\\n  install,\\n};\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),a(\"br\")])]),a(\"p\",[s._v(\"现在插件就开发完成了，可以在当前项目中本地引用这个插件了。\")]),s._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"//在 main.js 中\\nimport toast from src/components/index.js;\\nVue.use(toast);\\n\\n//在 App.vue 中\\nhandleClick(){\\n  this.$toast();\\n}\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\")])])])}),[],!1,null,null,null);n.default=t.exports}}]);","extractedComments":[]}