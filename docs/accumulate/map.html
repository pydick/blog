<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        #result,
        #panel {
            position: absolute;
            background-color: white;
            max-height: 90%;
            overflow-y: auto;
            top: 10px;
            right: 10px;
            width: 280px;
        }
    </style>
</head>

<body>
    <div id="container"></div>
    <div id="result"></div>
    <div id="panel"></div>
    <div id="info"></div>
</body>
<script type="text/javascript" src="http://webapi.amap.com/maps?v=1.3&key=67749ba8964f18ba0cc70c887f1963ba"></script>
<script>
    var map = new AMap.Map('container', {
        zoom: 11,
        mapStyle: 'fresh', //normal,fresh,dark,blue_night, light
        features: ['road'], // bg,point,road,building
        center: [116.397428, 39.90923]
    });
    // 1.
    // map.plugin(["AMap.ToolBar", "AMap.Scale", "AMap.Geolocation", "AMap.OverView", "AMap.MapType"], function() {
    //     map.addControl(new AMap.ToolBar()); // 工具条控件
    //     map.addControl(new AMap.Scale()); // 比例尺
    //     map.addControl(new AMap.Geolocation()); // 定位
    //     map.addControl(new AMap.OverView()); // 鹰眼
    //     map.addControl(new AMap.MapType()); // 类型切换
    // });

    // 2.
    // map.plugin(["AMap.MouseTool"], function() {
    //     var mouseTool = new AMap.MouseTool(map);
    //     // mouseTool.rule(); //测量距离
    //     // mouseTool.measureArea(); //测量面积
    //     // mouseTool.marker(); //绘制标注点
    //     // mouseTool.polyline(); //绘制折线
    //     // mouseTool.polygon(); //绘制多边形
    //     // mouseTool.rectangle(); //绘制矩形
    //     // mouseTool.circle(); //绘制圆
    //     // mouseTool.rectZoomIn() //鼠标拉框放大
    //     // mouseTool.polyline({ // 自定义覆盖物样式
    //     //     strokeColor: "red", // 线条颜色，十六进制
    //     //     strokeOpacity: 0.5, // 线条透明度
    //     //     strokeWeight: 2, // 线条宽度
    //     //     strokeStyle: "dashed" // 线条样式 solid || dashed
    //     // });
    // });

    // 3.
    // map.plugin(["AMap.RangingTool"], function() {
    //     // var rangingTool = new AMap.RangingTool(map); // 加载距离插件
    //     // rangingTool.turnOn(); // 开启量测功能

    //     map.plugin(["AMap.RangingTool"], function() { // 距离插件设置样式设置(改变标签文字、改变线条样式)
    //         var rangingTool = new AMap.RangingTool(map, {
    //             startLabelText: "START",
    //             midLabelText: "MID",
    //             endLabelText: "END",
    //             lineOptions: {
    //                 strokeColor: "red",
    //                 strokeStyle: "dashed",
    //                 strokeWeight: 3,
    //                 strokeOpacity: 0.5,
    //                 isOutline: true,
    //                 outlineColor: "green",
    //                 showDir: true
    //             }
    //         });
    //         rangingTool.turnOn();
    //     });
    // });

    // //、 用坐标拾取器获得坐标
    // var lineArr = [
    //     [112.490931, 37.898793],
    //     [112.553588, 37.898793],
    //     [112.603026, 37.899877],
    //     [112.605086, 37.855028],
    //     [112.605601, 37.831169],
    //     [112.610236, 37.824661],
    //     [112.610236, 37.798487],
    //     [112.602683, 37.793739],
    //     [112.499171, 37.793739],
    //     [112.495051, 37.794553],
    //     [112.500544, 37.830762],
    //     [112.500716, 37.843099],
    //     [112.48973, 37.847301],
    //     [112.489901, 37.896897],
    //     [112.492476, 37.8992]
    // ];
    // // 实例化一个Polyline类
    // var polyline = new AMap.Polyline({
    //     path: lineArr,
    //     strokeColor: "#ff2200",
    //     strokeWeight: 5
    // });
    // // 添加到地图中
    // polyline.setMap(map); //或者 map.add(polyline);

    // 4.
    // // 通用点mark
    // var marker = new AMap.Marker({
    //     map: map,
    //     position: new AMap.LngLat(112.549248, 37.852135)
    // });
    // //自定义点标记
    // var marker = new AMap.Marker({
    //     map: map,
    //     position: new AMap.LngLat(112.549248, 37.852135),
    //     icon: new AMap.Icon({
    //         image: "https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=2803620233,1906638381&fm=23&gp=0.jpg",
    //         size: [72, 72],
    //         imageSize: [36, 36]
    //     }),
    //     draggable: true,
    //     raiseOnDrag: true,
    //     shape: new AMap.MarkerShape({
    //         type: "circle",
    //         coords: [112.549248, 37.852135],
    //     }),
    //     label: {
    //         content: "label",
    //         offset: new AMap.Pixel(0, -36)
    //     }
    // });
    // //多边形
    // var lineArr = [
    //     [112.49157, 37.897392],
    //     [112.602806, 37.898747],
    //     [112.608643, 37.797355],
    //     [112.49775, 37.79627]
    // ];
    // var polygon = new AMap.Polygon({
    //     map: map,
    //     path: lineArr
    // });
    // //右键菜单
    // var contextmenu = new AMap.ContextMenu();
    // var pos = [];
    // // 添加右键菜单内容项
    // contextmenu.addItem("放大", function() {
    //     map.zoomIn();
    // }, 0);
    // contextmenu.addItem("缩小", function() {
    //     map.zoomOut();
    // }, 1);
    // contextmenu.addItem("添加点标记", function() {
    //     var marker = new AMap.Marker({
    //         map: map,
    //         position: pos
    //     });
    // }, 2);
    // // 监听鼠标右击事件
    // map.on("rightclick", function(e) {
    //     contextmenu.open(map, e.lnglat);
    //     pos = e.lnglat;
    // });
    // //信息窗口
    // var infowindow = new AMap.InfoWindow({
    //     isCustom: false,
    //     content: "<h3>Hello,Yuanping</h3>",
    //     offset: new AMap.Pixel(0, -36),
    //     showShadow: true,
    //     closeWhenClickMap: true,
    //     autoMove: true
    // });
    // infowindow.open(map, new AMap.LngLat(112.549248, 37.852135));

    // 鼠标划过山西大剧院时，弹出信息窗体
    // 坐标
    // var lineArr = [
    //     [112.532802, 37.808395],
    //     [112.533049, 37.808395],
    //     [112.533124, 37.808476],
    //     [112.533521, 37.808459],
    //     [112.533558, 37.808391],
    //     [112.533832, 37.808391],
    //     [112.533848, 37.80792],
    //     [112.534159, 37.807959],
    //     [112.534159, 37.80748],
    //     [112.533826, 37.807514],
    //     [112.533832, 37.807179],
    //     [112.533966, 37.806848],
    //     [112.533376, 37.806683],
    //     [112.533054, 37.806687],
    //     [112.532684, 37.806878],
    //     [112.53278, 37.807191],
    //     [112.532796, 37.80745],
    //     [112.532013, 37.807285],
    //     [112.532019, 37.808213],
    //     [112.532796, 37.808018],
    //     [112.532818, 37.808412]
    // ];
    // // 实例化Polygon类
    // var polygon = new AMap.Polygon({
    //     map: map,
    //     path: lineArr
    // });
    // // 实例化信息窗体类
    // var infowindow = new AMap.InfoWindow({
    //     content: "<h3>太原市</h3><p>山西大剧院</p>",
    //     closeWhenClickMap: true
    // });
    // // 监听鼠标移入、移除事件
    // polygon.on("mouseover", function(e) {
    //     infowindow.open(map, map.getCenter());
    // }).on("mouseout", function() {
    //     infowindow.close();
    // });

    // // 创建地点查询类的实例
    // AMap.service("AMap.PlaceSearch", function() {
    //     var s1 = new AMap.PlaceSearch({
    //         city: "北京市", // 搜索范围的城市
    //         type: "风景名胜", // 搜索类型
    //         map: map, // 可选，AMap示例
    //         panel: "result", // 可选，结果列表的HTML容器id或容器元素
    //         pageSize: 5, // 结果，单页展示结果数
    //         pageIndex: 2, // 结果，页码
    //         extensions: "all" // 信息，默认值 "base", 详细信息 "all"
    //     });
    //     // // 关键字搜索
    //     // s1.search("八达岭", function(status, result) {
    //     //     console.log(result);
    //     // });
    //     // // 周边搜索
    //     // s1.searchNearBy("餐饮", [116.403322, 39.920255], 1000, function(status, result) {
    //     //     console.log(result);
    //     // });
    //     // // 根据范围和关键词进行范围查询
    //     // var lnglat1 = new AMap.LngLat(116.403322, 39.920255);
    //     // var lnglat2 = new AMap.LngLat(116.389846, 39.891365);
    //     // s1.searchInBounds('酒店', new AMap.Bounds(lnglat1, lnglat2));

    //     // // 根据POIID 查询POI详细信息
    //     // s1.getDetails("B0FFGXNN2E", function(status, result) {
    //     //     console.log(result.poiList.pois[0].name);
    //     //     console.log(result.poiList.pois[0]);
    //     //     document.getElementById('info').innerHTML = JSON.stringify(result.poiList.pois[0]);
    //     //     // window.top.data = result.poiList.pois[0];
    //     // });
    // });

    // 公交线路搜索插件
    // AMap.service("AMap.LineSearch", function() {
    //     var lineSearch = new AMap.LineSearch({
    //         city: "太原",
    //         extensions: "all"
    //     });
    //     lineSearch.search("901", function(status, result) {
    //         if (status === "complete" && result.info === "OK") {
    //             console.log(result);
    //             window.top.data = result;
    //         }
    //     });
    //     // 按id查询公交线路
    //     lineSearch.searchById("140100010566", function(status, result) {
    //         if (status === "complete" && result.info === "OK") {
    //             console.log(result);
    //             window.top.data = result;
    //         }
    //     });
    // });
    // 加载公交线路插件
    // AMap.service("AMap.Transfer", function() {
    //     // 实例化Transfer 
    //     var transfer = new AMap.Transfer({
    //         city: "北京", // 必须值，搭乘公交所在城市
    //         map: map, // 可选值，搜索结果的标注、线路等均会自动添加到此地图上
    //         panel: "panel", // 可选值，显示搜索列表的容器,
    //         extensions: "all", // 可选值，详细信息        
    //         poliy: AMap.TransferPolicy.LEAST_TIME // 驾驶策略：最省时模式
    //     });

    //     // // 关键字搜索
    //     // transfer.search([{
    //     //     keyword: "北京西站"
    //     // }, {
    //     //     keyword: "天安门"
    //     // }], function(status, result) {
    //     //     window.top.data = result;
    //     // });

    //     // 按坐标搜索
    //     transfer.search([116.379028, 39.865042], [116.427281, 39.903719], function(status, result) {
    //         window.top.data = result;
    //     });
    // });

    // // 加载驾车路径插件
    // AMap.service("AMap.Driving", function() {
    //     // 实例化Driving    
    //     var driving = new AMap.Driving({
    //         map: map, // 用来承载 显示路径
    //         panel: "panel", // 显示搜索列表的容器
    //         extensions: "all", // 详细信息
    //         policy: AMap.DrivingPolicy.REAL_TRAFFIC, // 驾驶策略：合理交通
    //         showTraffic: true, // 是否显示路况
    //         province: "晋", // 判断限行
    //         number: "A88888", // 判断限行
    //         hideMarkers: false, // 隐藏起点、终点的点标注
    //         isOutline: true, // 是否显示线路的边框
    //         outlineColor: "#f00" // 边框颜色
    //     });
    //     // // 按关键字搜索
    //     // driving.search([{
    //     //     keyword: "北京西站",
    //     //     city: "北京"
    //     // }, {
    //     //     keyword: "天安门",
    //     //     city: "北京"
    //     // }], function(status, result) {
    //     //     window.top.data = result;
    //     // });
    //     // 按坐标搜索
    //     driving.search([116.379028, 39.865042], [116.427281, 39.903719], function(status, result) {
    //         console.log(result);
    //         window.top.data = result;
    //     });
    // });

    // // 坐标点
    // var points = [{
    //     "lng": 116.191031,
    //     "lat": 39.988585,
    //     "count": 100
    // }, {
    //     "lng": 116.389275,
    //     "lat": 39.925818,
    //     "count": 60
    // }, {
    //     "lng": 116.287444,
    //     "lat": 39.810742,
    //     "count": 200
    // }, {
    //     "lng": 116.481707,
    //     "lat": 39.940089,
    //     "count": 30
    // }, {
    //     "lng": 116.410588,
    //     "lat": 39.880172,
    //     "count": 200
    // }, {
    //     "lng": 116.394816,
    //     "lat": 39.91181,
    //     "count": 10
    // }, {
    //     "lng": 116.416002,
    //     "lat": 39.952917,
    //     "count": 150
    // }];
    // // 加载热力图插件
    // map.plugin(["AMap.Heatmap"], function() {
    //     var heatmap = new AMap.Heatmap(map, {
    //         radius: 50
    //     });
    //     heatmap.setDataSet({
    //         data: points,
    //         max: 100
    //     });
    // })

    // 生成点标记
    var markers = [];
    var marker = null;
    for (var i = 0; i < 100; i++) {
        marker = new AMap.Marker({
            position: [116.39 + 0.001 * Math.random() * i, 39.90 - 0.001 * Math.random() * i],
            icon: "http://amappc.cn-hangzhou.oss-pub.aliyun-inc.com/lbs/static/img/marker.png"
        });
        marker.setMap(map);
        markers.push(marker);
    }
    map.plugin(["AMap.MarkerClusterer"], function() {
        var cluster = new AMap.MarkerClusterer(map, markers);
    });
    // 聚合样式
    var sts = [{
        url: "http://a.amap.com/lbs/static/img/1102-1.png",
        size: new AMap.Size(32, 32),
        offset: new AMap.Pixel(-16, -30),
        imageOffset: new AMap.Pixel(0, 0)
    }, {
        url: "http://a.amap.com/lbs/static/img/2.png",
        size: new AMap.Size(32, 32),
        offset: new AMap.Pixel(-16, -30)
    }, {
        url: "http://lbs.amap.com/wp-content/uploads/2014/06/3.png",
        size: new AMap.Size(32, 32),
        offset: new AMap.Pixel(-16, -30),
        textColor: "#f00",
        textSize: 30
    }];
    // 载入插件
    map.plugin(["AMap.MarkerClusterer"], function() {
        var cluster = new AMap.MarkerClusterer(map, markers, {
            styles: sts
        });
    });
</script>
<style>
    #container {
        width: 600px;
        height: 360px;
        margin: 100px auto 0;
    }
</style>

</html>

</html>